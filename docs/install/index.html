<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="kube-green RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="kube-green Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="kube-green" href="/opensearch.xml"><title data-react-helmet="true">Install | kube-green</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://kube-green.dev/img/logo.svg"><meta data-react-helmet="true" name="twitter:image" content="https://kube-green.dev/img/logo.svg"><meta data-react-helmet="true" property="og:url" content="https://kube-green.dev/docs/install/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Install | kube-green"><meta data-react-helmet="true" name="description" content="Prerequisite"><meta data-react-helmet="true" property="og:description" content="Prerequisite"><link data-react-helmet="true" rel="icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://kube-green.dev/docs/install/"><link data-react-helmet="true" rel="alternate" href="https://kube-green.dev/docs/install/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kube-green.dev/docs/install/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://OO5LH8JODS-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e80cdb1d.css">
<link rel="preload" href="/assets/js/runtime~main.6d77f3e7.js" as="script">
<link rel="preload" href="/assets/js/main.afe0b0f3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">If you like kube-green, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/kube-green/kube-green">GitHub</a> ‚≠ê</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="kube-green Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo-dark.svg" alt="kube-green Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">kube-green</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kube-green/kube-green" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">üåú</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">üåû</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/lifecycle/">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/install/">Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/configuration/">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/real-usecase/first-usage/">Real use case</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/tutorials/kind/">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/advanced/uninstall/">Advanced</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apireference_v1alpha1/">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/FAQ/">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Install</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="prerequisite">Prerequisite<a class="hash-link" href="#prerequisite" title="Direct link to heading">‚Äã</a></h2><p><em>kube-green</em> support all cluster versions &gt;= 1.19 &lt;= 1.23.</p><p>To successfully install <em>kube-green</em>, in the cluster must be installed a <strong>cert-manager</strong>. If it is not already installed installed, <a href="https://cert-manager.io/docs/installation/" target="_blank" rel="noopener noreferrer">click here</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="kubectl-apply">kubectl apply<a class="hash-link" href="#kubectl-apply" title="Direct link to heading">‚Äã</a></h2><p>With this method, you can not change the default configuration parameters.</p><p>The default static configuration for the latest release can be installed with:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://github.com/kube-green/kube-green/releases/latest/download/kube-green.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If you want to install a specific release version, run:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://github.com/kube-green/kube-green/releases/download/${RELEASE_TAG}/kube-green.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>with <code>${RELEASE_TAG}</code> correctly filled.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="kustomize">kustomize<a class="hash-link" href="#kustomize" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="change-default-configuration">Change default configuration<a class="hash-link" href="#change-default-configuration" title="Direct link to heading">‚Äã</a></h3><p>You can change default configuration editing the config files.</p><p>For example, to deploy the controller in another namespace, change the file <a href="https://github.com/kube-green/kube-green/blob/main/config/default/kustomization.yaml#L2" target="_blank" rel="noopener noreferrer">kustomization.yaml</a> with the desired namespace name.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="deploy">Deploy<a class="hash-link" href="#deploy" title="Direct link to heading">‚Äã</a></h3><p>To install <em>kube-green</em> in the cluster, clone the repository and run</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> deploy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will create a new namespace, <em>kube-green</em>, which contains the pod of the operator.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="operator-lifecycle-manager-olm">Operator Lifecycle Manager (OLM)<a class="hash-link" href="#operator-lifecycle-manager-olm" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="install-from-operatorhubio">Install from OperatorHub.io<a class="hash-link" href="#install-from-operatorhubio" title="Direct link to heading">‚Äã</a></h3><p>You can find <em>kube-green</em> in the <a href="https://operatorhub.io/operator/kube-green" target="_blank" rel="noopener noreferrer">OperatorHub.io website</a>. Click the Install button, and follow the instructions.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="install-on-openshift">Install on OpenShift<a class="hash-link" href="#install-on-openshift" title="Direct link to heading">‚Äã</a></h3><p><em>kube-green</em> is in the <a href="https://docs.openshift.com/container-platform/4.9/operators/understanding/olm-rh-catalogs.html" target="_blank" rel="noopener noreferrer">Red Hat-provided Operator catalogs</a> called community operators. On OpenShift 4 you can install <em>kube-green</em> from <a href="https://docs.openshift.com/container-platform/4.9/operators/understanding/olm-understanding-operatorhub.html" target="_blank" rel="noopener noreferrer">OperatorHub</a>. To install it, follow <a href="https://docs.openshift.com/container-platform/4.9/operators/admin/olm-adding-operators-to-cluster.html" target="_blank" rel="noopener noreferrer">this guide</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="cloud-compatibility">Cloud compatibility<a class="hash-link" href="#cloud-compatibility" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="gke">GKE<a class="hash-link" href="#gke" title="Direct link to heading">‚Äã</a></h3><p>When Google configure the control plane for private cluster, they automatically configure VPC peering between your Kubernetes cluster network and a separate Google managed project.</p><p>To restrict what Google is able to access in your cluster, the firewall rules configured restrict access to your Kubernetes pods. This means that the webhook won&#x27;t work, and you see an error like <code>Internal error occurred: failed calling webhook ...:</code></p><p>So, to use the webhook component with a GKE private cluster, you need to configure an additional firewall rule to allow the GKE control plane to access to your webhook pod.</p><p><em>kube-green</em> uses webhook (exposed on port 9443) to check that SleepInfo CRD is valid. In order to make it works, you must open the 9443 port (or change the exposed port by configuration) otherwise it would not possible to add SleepInfo CRD.</p><p><a href="https://cloud.google.com/kubernetes-engine/docs/how-to/private-clusters#add_firewall_rules" target="_blank" rel="noopener noreferrer">Here</a> you can read more information about how to add firewall rules to GKE.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kube-green/kube-green.github.io/edit/main/docs/install.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/lifecycle/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How it works</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/configuration/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuration</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisite" class="table-of-contents__link toc-highlight">Prerequisite</a></li><li><a href="#kubectl-apply" class="table-of-contents__link toc-highlight">kubectl apply</a></li><li><a href="#kustomize" class="table-of-contents__link toc-highlight">kustomize</a><ul><li><a href="#change-default-configuration" class="table-of-contents__link toc-highlight">Change default configuration</a></li><li><a href="#deploy" class="table-of-contents__link toc-highlight">Deploy</a></li></ul></li><li><a href="#operator-lifecycle-manager-olm" class="table-of-contents__link toc-highlight">Operator Lifecycle Manager (OLM)</a><ul><li><a href="#install-from-operatorhubio" class="table-of-contents__link toc-highlight">Install from OperatorHub.io</a></li><li><a href="#install-on-openshift" class="table-of-contents__link toc-highlight">Install on OpenShift</a></li></ul></li><li><a href="#cloud-compatibility" class="table-of-contents__link toc-highlight">Cloud compatibility</a><ul><li><a href="#gke" class="table-of-contents__link toc-highlight">GKE</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.6d77f3e7.js"></script>
<script src="/assets/js/main.afe0b0f3.js"></script>
</body>
</html>